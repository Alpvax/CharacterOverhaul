package alpvax.characteroverhaul.core;

import alpvax.characteroverhaul.capabilities.CapabilityCharacterHandler;
import alpvax.characteroverhaul.core.proxy.CommonProxy;
import alpvax.characteroverhaul.perk.Perk;
import net.minecraft.client.resources.I18n;
import net.minecraft.util.ResourceLocation;
import net.minecraftforge.common.MinecraftForge;
import net.minecraftforge.fml.common.Mod;
import net.minecraftforge.fml.common.Mod.Metadata;
import net.minecraftforge.fml.common.ModMetadata;
import net.minecraftforge.fml.common.SidedProxy;
import net.minecraftforge.fml.common.event.FMLPreInitializationEvent;
import net.minecraftforge.fml.common.registry.FMLControlledNamespacedRegistry;
import net.minecraftforge.fml.common.registry.PersistentRegistryManager;

@Mod(modid = CharacterOverhaul.MOD_ID, version = CharacterOverhaul.VERSION)
public class CharacterOverhaul
{
	public static final String MOD_ID = "characteroverhaul";
	public static final String VERSION = "0.1.0";

	public static final ResourceLocation PERKS = new ResourceLocation(MOD_ID, "perks");
	private static final int MAX_PERK_ID = 0xff;
	public static FMLControlledNamespacedRegistry<Perk> perksRegistry;

	@SidedProxy(
			clientSide = "alpvax.skillsandabilities.core.proxy.ClientProxy",
			serverSide = "alpvax.skillsandabilities.core.proxy.CommonProxy")
	public static CommonProxy proxy;

	@Mod.Instance(MOD_ID)
	public static CharacterOverhaul instance;

	@Metadata(MOD_ID)
	public static ModMetadata meta;

	@Mod.EventHandler
	public void preInit(FMLPreInitializationEvent e)
	{
		meta.name = I18n.format(MOD_ID + ":mod.name");
		meta.description = I18n.format(MOD_ID + ":mod.description");
		meta.authorList.add("Alpvax");
		meta.autogenerated = false;

		perksRegistry = PersistentRegistryManager.createRegistry(PERKS, Perk.class, null, 0, MAX_PERK_ID, true, null, null, null);

		CapabilityCharacterHandler.register();
		MinecraftForge.EVENT_BUS.register(new CharacterOverhaulHooks());
	}
}
